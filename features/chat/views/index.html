{{ define "index" }}
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <title>Shell>> chat</title>
      {{block "meta" .}}{{end}}
      <style>
       .option {
           padding: 1rem 2rem;
           color: #2f3236;
       }
      </style>
    </head>
    <body class="flex flex-col flex-grow h-screen">
      <header class="flex justify-between items-center bg-gray-200">
	{{if .Chat.Title}}
	  <h1>{{.Chat.Title}}</h1>
	  <div hx-get="{{.Chat.ID}}/tags" hx-swap="outerHTML" hx-trigger="load"></div>
	{{else}}
	  <h1>New chat</h1>
	{{end}}
	{{if .Chat.Messages}}
	  <a href="/chat" class="bg-blue-300 p-2">Start a new chat</a>
	{{end}}
      </header>
      {{template "messages" .Chat}}
      <form
	hx-post="{{ .Chat.ID }}/message"
	hx-target="#messages"
	hx-on::after-request="if(event.detail.successful) this.reset()"
	class="flex items-center justify-center bg-gray-400 p-4"
      >
	<div class="relative">
	    <textarea class="h-30 w-96 bg-white p-2"  id="prompt" name="prompt" type="text" required placeholder="Prompt..."></textarea>
            <button type="submit">Send</button>
	</div>
      </form>
    </body>
    <script>
    </script>
  </html>
{{ end }}
